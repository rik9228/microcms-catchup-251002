# 🌏 サイトに公開しよう

## 🚀 Cloudflare Pages（ドラッグ＆ドロップ版）

Cloudflare Pages は、無料で静的サイトを公開できるホスティングサービスです。
GitHub などを使わなくても、ファイルをブラウザにドラッグ＆ドロップするだけで公開できます。

## ✅ 前提条件

公開する前に、以下の準備をしておきましょう。

- microCMSで作ったデータをJavaScriptから取得できる状態になっている
```javascript
fetch("https://xxxx.microcms.io/api/v1/news", {
  headers: { "X-API-KEY": "あなたのAPIキー" }
})
```

- HTML / CSS / JS ファイルがローカルで完成している
（例：index.html, style.css, main.js）

すべてのファイルをひとつのフォルダ（例：dist/）にまとめておく

## 🪜 公開手順（Git不要・ドラッグ＆ドロップ）

① Cloudflare Pages にアクセス

👉 https://pages.cloudflare.com/

にアクセスして、Cloudflareアカウントを作成またはログインします。

② 新しいプロジェクトを作成

ダッシュボードで「Create a project（新しいプロジェクトを作成）」をクリック

下にある「Upload assets（アセットをアップロード）」を選択します

💡 「Connect to Git」ではなく、「Upload assets」を選ぶのがポイントです。

③ ファイルをアップロード

先ほど用意したフォルダ（例：dist/）をそのまま ドラッグ＆ドロップ
またはファイル選択ダイアログからアップロードします

Cloudflareが自動的にファイルを読み込み、アップロードの確認画面が表示されます

プロジェクト名を入力して「Deploy site（サイトをデプロイ）」をクリック

④ 公開完了！

数秒後、次のような URL が発行されます👇

https://your-project-name.pages.dev/


このURLを開くと、つくったサイトがインターネット上に公開されるようになります 🎉

## 🧩 microCMS のデータが表示されないとき

Cloudflare Pages にアップロードしたあとに
「データが表示されない」「fetchでエラーが出る」といった場合は、
以下を確認してください。

症状	原因と解決方法
CORSエラーが出る	microCMSのAPI設定で「APIキー」や「リファラー制限」を確認する。https://*.pages.dev からのアクセスを許可する必要があります。
データが取得できない	fetchのURLやAPIキーの指定を確認。ブラウザの開発者ツール（Networkタブ）で通信状況をチェック。
画像が表示されない	相対パス（例：./images/）で指定されているか確認。大文字小文字の違いにも注意。
🔒 APIキーの扱いについて（注意点）

ブラウザで動作する Vanilla JS では、APIキーをそのまま公開すると
第三者に見えてしまうリスクがあります。

もしセキュリティを重視する場合は：

microCMSの「APIキー」を「閲覧専用キー」にする

Cloudflare Workersなどを使って中継APIを作る

などの対策を検討してください。

🌐 独自ドメインを設定したい場合（任意）

Cloudflare Pages のプロジェクト画面を開く

左メニューの「Custom domains（カスタムドメイン）」をクリック

`example.com` や `site.example.com` を追加

DNS設定をCloudflareで管理し、CNAMEを設定

これで、独自ドメインでアクセスできるようになります。

---

[他の案件で使用する場合](/docs/他の案件で使用する場合.md)